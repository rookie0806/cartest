{"ast":null,"code":"import _objectSpread from\"C:/Users/devgu/Desktop/\\uC678\\uC8FC/\\uD314\\uBCF5\\uC790\\uB3D9\\uCC28\\uACF5\\uC5C5\\uC0AC/car/car/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";// imports\n// actions\nvar SAVE_TOKEN=\"SAVE_TOKEN\";var LOGOUT=\"LOGOUT\";var SAVE_NICKNAME=\"SAVE_NICKNAME\";var ERR=\"ERR\";// action creators\nfunction saveToken(token){return{type:SAVE_TOKEN,token:token};}function saveNickName(nickname){return{type:SAVE_NICKNAME,nickname:nickname};}function sendERR(err){console.log(\"dd\");return{type:ERR,err:err};}function logout(){return{type:LOGOUT};}function usernameLogin(username,password){return function(dispatch){fetch(\"/rest-auth/login/\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({username:username,password:password})}).then(function(response){if(response.status===400){dispatch(sendERR(\"아이디 혹은 비밀번호를 확인해주세요\"));}return response.json();}).then(function(json){if(json.token){dispatch(saveToken(json.token));dispatch(saveNickName(json.user.pk+\"분\"));}});};}function createAccount(username,password){return function(dispatch){fetch(\"/rest-auth/registration/\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({username:username,password1:password,password2:password,nickname:\"1분\"})}).then(function(response){if(response.status===400){dispatch(sendERR(\"아이디\"));}return response.json();}).then(function(json){console.log(json);if(json.token){dispatch(saveToken(json.token));dispatch(saveNickName(json.user.pk+\"분\"));}if(json.password1){dispatch(sendERR(\"비밀번호는 8글자 이상, 문자와 숫자를 포함해야합니다.\"));}if(json.username){dispatch(sendERR(\"이미 존재하는 아이디입니다.\"));}}).catch(function(response){console.log(response.status,response.statusText);// 3. get error messages, if any\n});};}// initial state\nvar initialState={isLoggedIn:localStorage.getItem(\"jwt\")?true:false,token:localStorage.getItem(\"jwt\"),nickname:localStorage.getItem(\"nickname\")};// reducer\nfunction reducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case SAVE_TOKEN:return applySetToken(state,action);case LOGOUT:return applyLogout(state,action);case ERR:return applysendERR(state,action);case SAVE_NICKNAME:return applySetNickName(state,action);default:return state;}}// reducer functions\nfunction applySetToken(state,action){var token=action.token;localStorage.setItem(\"jwt\",token);return _objectSpread(_objectSpread({},state),{},{isLoggedIn:true,token:token});}function applySetNickName(state,action){var nickname=action.nickname;localStorage.setItem(\"nickname\",nickname);return _objectSpread(_objectSpread({},state),{},{isLoggedIn:true,nickname:nickname});}function applyLogout(state,action){localStorage.removeItem(\"jwt\");return{isLoggedIn:false};}function applysendERR(state,action){var err=action.err;return _objectSpread(_objectSpread({},state),{},{err:err});}// exports\nvar actionCreators={usernameLogin:usernameLogin,createAccount:createAccount,logout:logout};export{actionCreators};// export reducer by default\nexport default reducer;","map":{"version":3,"sources":["C:/Users/devgu/Desktop/외주/팔복자동차공업사/car/car/frontend/src/redux/modules/user.js"],"names":["SAVE_TOKEN","LOGOUT","SAVE_NICKNAME","ERR","saveToken","token","type","saveNickName","nickname","sendERR","err","console","log","logout","usernameLogin","username","password","dispatch","fetch","method","headers","body","JSON","stringify","then","response","status","json","user","pk","createAccount","password1","password2","catch","statusText","initialState","isLoggedIn","localStorage","getItem","reducer","state","action","applySetToken","applyLogout","applysendERR","applySetNickName","setItem","removeItem","actionCreators"],"mappings":"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","sourcesContent":["// imports\r\n\r\n// actions\r\n\r\nconst SAVE_TOKEN = \"SAVE_TOKEN\";\r\nconst LOGOUT = \"LOGOUT\";\r\nconst SAVE_NICKNAME = \"SAVE_NICKNAME\";\r\nconst ERR = \"ERR\";\r\n// action creators\r\n\r\nfunction saveToken(token) {\r\n  return {\r\n    type: SAVE_TOKEN,\r\n    token\r\n  };\r\n}\r\n\r\nfunction saveNickName(nickname) {\r\n    return {\r\n      type: SAVE_NICKNAME,\r\n      nickname\r\n    };\r\n  }\r\nfunction sendERR(err) {\r\n    console.log(\"dd\")\r\n    return {\r\n      type: ERR,\r\n      err\r\n    };\r\n  }\r\nfunction logout() {\r\n  return {\r\n    type: LOGOUT\r\n  };\r\n}\r\n\r\n\r\nfunction usernameLogin(username, password) {\r\n  return dispatch => {\r\n    fetch(\"/rest-auth/login/\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      body: JSON.stringify({\r\n        username,\r\n        password\r\n      })\r\n    })\r\n    .then(response => {\r\n        if (response.status === 400) {\r\n            dispatch(sendERR(\"아이디 혹은 비밀번호를 확인해주세요\"));\r\n        }\r\n        return response.json();\r\n      })\r\n      .then(json => {\r\n        if (json.token) {\r\n          dispatch(saveToken(json.token));\r\n          dispatch(saveNickName(json.user.pk+\"분\"))\r\n        }\r\n      })\r\n  };\r\n}\r\n\r\nfunction createAccount(username, password) {\r\n  return dispatch => {\r\n    fetch(\"/rest-auth/registration/\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      body: JSON.stringify({\r\n        username,\r\n        password1: password,\r\n        password2: password,\r\n        nickname : \"1분\",\r\n      })\r\n    })\r\n    .then(response => {\r\n        if (response.status === 400) {\r\n            dispatch(sendERR(\"아이디\"));\r\n        }\r\n        return response.json();\r\n      })\r\n      .then(json => {\r\n          console.log(json)\r\n        if (json.token) {\r\n          dispatch(saveToken(json.token));\r\n          dispatch(saveNickName(json.user.pk+\"분\"))\r\n        }\r\n        if (json.password1) {\r\n            dispatch(sendERR(\"비밀번호는 8글자 이상, 문자와 숫자를 포함해야합니다.\"));\r\n          }\r\n          if(json.username){\r\n            dispatch(sendERR(\"이미 존재하는 아이디입니다.\"));\r\n          }\r\n      })\r\n      .catch((response) => {\r\n        console.log(response.status, response.statusText);\r\n        // 3. get error messages, if any\r\n        \r\n      });\r\n  };\r\n}\r\n\r\n\r\n\r\n\r\n// initial state\r\n\r\nconst initialState = {\r\n  isLoggedIn: localStorage.getItem(\"jwt\") ? true : false,\r\n  token: localStorage.getItem(\"jwt\"),\r\n  nickname: localStorage.getItem(\"nickname\")\r\n};\r\n\r\n// reducer\r\n\r\nfunction reducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    case SAVE_TOKEN:\r\n      return applySetToken(state, action);\r\n    case LOGOUT:\r\n      return applyLogout(state, action);\r\n    case ERR:\r\n        return applysendERR(state, action);\r\n    case SAVE_NICKNAME:\r\n        return applySetNickName(state, action);\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n// reducer functions\r\n\r\nfunction applySetToken(state, action) {\r\n  const { token } = action;\r\n  localStorage.setItem(\"jwt\", token);\r\n  return {\r\n    ...state,\r\n    isLoggedIn: true,\r\n    token: token\r\n  };\r\n}\r\nfunction applySetNickName(state, action) {\r\n    const { nickname } = action;\r\n    localStorage.setItem(\"nickname\", nickname);\r\n    return {\r\n      ...state,\r\n      isLoggedIn: true,\r\n      nickname: nickname\r\n    };\r\n  }\r\n  \r\nfunction applyLogout(state, action) {\r\n  localStorage.removeItem(\"jwt\");\r\n  return {\r\n    isLoggedIn: false\r\n  };\r\n}\r\nfunction applysendERR(state, action) {\r\n    const { err } = action;\r\n    return {\r\n        ...state,\r\n        err : err,\r\n    };\r\n  }\r\n  \r\n\r\n\r\n// exports\r\n\r\nconst actionCreators = {\r\n  usernameLogin,\r\n  createAccount,\r\n  logout,\r\n  \r\n};\r\n\r\nexport { actionCreators };\r\n\r\n// export reducer by default\r\n\r\nexport default reducer;\r\n"]},"metadata":{},"sourceType":"module"}